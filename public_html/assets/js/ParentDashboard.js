var Ce=(E,B,h)=>new Promise((T,P)=>{var U=x=>{try{$(h.next(x))}catch(m){P(m)}},I=x=>{try{$(h.throw(x))}catch(m){P(m)}},$=x=>x.done?T(x.value):Promise.resolve(x.value).then(U,I);$((h=h.apply(E,B)).next())});import{b as be,r as u,j as e,d as O,m as Se,p as Be,a as Pe,S as ne}from"./index.js";import{f as xe,g as oe,h as w,i as j,j as me,k as i,F as ie,E as ve,A as ee,C as se,a as ae,l as he,m as je,n as ge,o as Ne,L as Ae,B as De,u as Re,v as ke,N as Te,x as Ie}from"./NotificationsPage.js";import{C as v,a as F,b as Y,B as g}from"./card.js";import{B as G,C as Le}from"./badge.js";import{S as te,a as re,b as le,c as ce,d as C,L as Z,I as fe,U as pe}from"./select.js";import{D as ue}from"./download.js";import{S as Ve,P as Ee,C as Oe,U as $e}from"./StudentResultSheet.js";import{R as we,C as de}from"./receipt.js";import{D as Me}from"./dollar-sign.js";import{C as Ye}from"./ChangePasswordPage.js";import{U as ye}from"./imageOptimizer.js";import{G as Ue,M as Ge}from"./message-square.js";import"./0f38946e273b623e7cb0b865c2f2fe194a9e92ea.js";import"./school.js";import"./lock.js";function He(){const{currentUser:E,parents:B,students:h,compiledResults:T,currentTerm:P,currentAcademicYear:U}=be(),[I,$]=u.useState(""),[x,m]=u.useState(P),[N,o]=u.useState(U),L=E?B.find(a=>a.id===E.linkedId):null,A=L?h.filter(a=>L.studentIds.includes(a.id)):[],p=A.find(a=>a.id===Number(I)),D=p?T.filter(a=>a.studentId===p.id&&a.status==="Approved"):[],y=p?T.find(a=>a.studentId===p.id&&a.term===x&&a.academicYear===N&&a.status==="Approved"):null,z=y?y.scores:[],R=a=>{O.success(`Downloading ${a.term} ${a.academicYear} report card...`)},H=a=>{O.info(`Opening ${a.term} ${a.academicYear} detailed report...`)},S=a=>a==="A"?"bg-[#28A745]":a==="B"?"bg-[#1E90FF]":a==="C"?"bg-[#FFC107]":"bg-[#DC3545]";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"Performance Reports"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"View and download academic performance reports"})]}),e.jsx(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsx(F,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Select Child"}),e.jsxs(te,{value:I,onValueChange:$,children:[e.jsx(re,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(le,{placeholder:"Choose child"})}),e.jsx(ce,{className:"bg-[#0F243E] border-white/10",children:A.map(a=>e.jsxs(C,{value:a.id.toString(),className:"text-white hover:bg-[#1E90FF]",children:[a.firstName," ",a.lastName," - ",a.className]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Academic Year"}),e.jsxs(te,{value:N,onValueChange:o,children:[e.jsx(re,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(le,{placeholder:"Select year"})}),e.jsxs(ce,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(C,{value:"2024/2025",className:"text-white hover:bg-[#1E90FF]",children:"2024/2025"}),e.jsx(C,{value:"2023/2024",className:"text-white hover:bg-[#1E90FF]",children:"2023/2024"}),e.jsx(C,{value:"2022/2023",className:"text-white hover:bg-[#1E90FF]",children:"2022/2023"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Term"}),e.jsxs(te,{value:x,onValueChange:m,children:[e.jsx(re,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(le,{placeholder:"Select term"})}),e.jsxs(ce,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(C,{value:"First Term",className:"text-white hover:bg-[#1E90FF]",children:"First Term"}),e.jsx(C,{value:"Second Term",className:"text-white hover:bg-[#1E90FF]",children:"Second Term"}),e.jsx(C,{value:"Third Term",className:"text-white hover:bg-[#1E90FF]",children:"Third Term"})]})]})]})]})})}),I&&y?e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(Y,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Current Term Performance Summary"})}),e.jsx(F,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Average Score"}),e.jsxs("p",{className:"text-2xl text-white",children:[y.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Position"}),e.jsxs("p",{className:"text-2xl text-[#FFD700]",children:[y.position,y.position===1?"st":y.position===2?"nd":y.position===3?"rd":"th"]})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Out of"}),e.jsx("p",{className:"text-2xl text-white",children:y.totalStudents})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Attendance"}),e.jsxs("p",{className:"text-2xl text-[#28A745]",children:[Math.round(y.timesPresent/y.totalAttendanceDays*100),"%"]})]})]})})]}),e.jsxs(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(Y,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white",children:["Subject Performance - ",x," ",N]})}),e.jsx(F,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsxs(w,{className:"bg-gradient-to-r from-[#1E90FF] to-[#00BFFF] border-none hover:bg-gradient-to-r",children:[e.jsx(j,{className:"text-white",children:"Subject"}),e.jsx(j,{className:"text-white text-center",children:"1st CA (20)"}),e.jsx(j,{className:"text-white text-center",children:"2nd CA (20)"}),e.jsx(j,{className:"text-white text-center",children:"Exam (60)"}),e.jsx(j,{className:"text-white text-center",children:"Total (100)"}),e.jsx(j,{className:"text-white text-center",children:"Grade"}),e.jsx(j,{className:"text-white text-center",children:"Remark"})]})}),e.jsx(me,{children:z.length===0?e.jsx(w,{className:"bg-[#0F243E] border-b border-white/5",children:e.jsx(i,{colSpan:7,className:"text-center py-8",children:e.jsx("p",{className:"text-white",children:"No scores available for this term"})})}):z.map((a,M)=>e.jsxs(w,{className:"bg-[#0F243E] border-b border-white/5 hover:bg-[#132C4A]",children:[e.jsx(i,{className:"text-white",children:a.subjectName}),e.jsx(i,{className:"text-center text-[#C0C8D3]",children:a.ca1}),e.jsx(i,{className:"text-center text-[#C0C8D3]",children:a.ca2}),e.jsx(i,{className:"text-center text-[#C0C8D3]",children:a.exam}),e.jsx(i,{className:"text-center text-white font-medium",children:a.total}),e.jsx(i,{className:"text-center",children:e.jsx(G,{className:`${S(a.grade)} text-white border-0`,children:a.grade})}),e.jsx(i,{className:"text-center text-[#C0C8D3]",children:a.remark})]},M))})]})})})]}),e.jsxs(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(Y,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Term Reports History"})}),e.jsx(F,{className:"p-5 space-y-3",children:D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ie,{className:"w-12 h-12 mx-auto mb-3 text-[#C0C8D3]"}),e.jsx("p",{className:"text-white mb-1",children:"No approved results yet"}),e.jsx("p",{className:"text-sm text-[#C0C8D3]",children:"Results will appear here once approved by admin"})]}):D.map(a=>e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5 hover:border-white/10 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white",children:[a.academicYear," - ",a.term]}),e.jsxs("p",{className:"text-xs text-[#C0C8D3]",children:["Class Average: ",a.averageScore.toFixed(1),"%"]})]}),e.jsx(G,{className:"bg-[#28A745] text-white border-0",children:"Approved"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Average"}),e.jsxs("p",{className:"text-white",children:[a.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Position"}),e.jsxs("p",{className:"text-[#FFD700]",children:[a.position,a.position===1?"st":a.position===2?"nd":a.position===3?"rd":"th"]})]}),e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Out of"}),e.jsx("p",{className:"text-white",children:a.totalStudents})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:()=>H(a),className:"flex-1 bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all h-10",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(g,{onClick:()=>R(a),className:"flex-1 bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md hover:scale-105 transition-all h-10",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},a.id))})]})]}):I&&!y?e.jsx(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(F,{className:"p-12 text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4 text-[#1E90FF]"}),e.jsx("h3",{className:"text-white mb-2",children:"No Results Available"}),e.jsxs("p",{className:"text-[#C0C8D3]",children:["No approved results for ",p==null?void 0:p.firstName," ",p==null?void 0:p.lastName," in ",x," ",N]})]})}):e.jsx(v,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(F,{className:"p-12 text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4 text-[#1E90FF]"}),e.jsx("h3",{className:"text-white mb-2",children:"No Child Selected"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Please select a child to view their performance reports"})]})})]})}function _e(){const{currentUser:E,students:B,parents:h,classes:T,compiledResults:P,subjectAssignments:U,affectiveDomains:I,psychomotorDomains:$,currentTerm:x,currentAcademicYear:m,fetchCompiledResults:N}=be(),[o,L]=u.useState(null),[A,p]=u.useState(x),[D,y]=u.useState(m),[z,R]=u.useState(!1),[H,S]=u.useState(null),[a,M]=u.useState(!1),[J,Q]=u.useState(null);u.useEffect(()=>{N().catch(()=>{})},[]);const _=E?h.find(r=>r.id===E.linkedId):null,X=_?B.filter(r=>_.studentIds.includes(r.id)):[],s=o?P.filter(r=>r.studentId===o&&r.term===A&&r.academicYear===D&&r.status==="Approved"):[],n=H?P.find(r=>r.id===H):null,d=r=>{Q(r),M(!0),R(!1)},f=r=>{Q(r),M(!0)},c=r=>{S(r),R(!0)},K=J?P.find(r=>r.id===J):null;return a&&K?e.jsx(Ve,{result:K,onClose:()=>M(!1)}):_?X.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"View Results"}),e.jsx("p",{className:"text-gray-600",children:"Access your children's academic results"})]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-blue-600"}),e.jsx(ae,{className:"text-gray-900",children:"No children linked to your account. Please contact the school administrator."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"View Results"}),e.jsx("p",{className:"text-gray-600",children:"Access and print your children's approved academic results"})]}),e.jsx(v,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:e.jsx(F,{className:"p-5",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-gray-700",children:"Select Child"}),e.jsxs(te,{value:(o==null?void 0:o.toString())||"",onValueChange:r=>L(parseInt(r)),children:[e.jsx(re,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(le,{placeholder:"Choose a child"})}),e.jsx(ce,{className:"bg-white border-gray-200",children:X.map(r=>e.jsxs(C,{value:r.id.toString(),className:"text-gray-900",children:[r.firstName," ",r.lastName," - ",r.className]},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-gray-700",children:"Academic Term"}),e.jsxs(te,{value:A,onValueChange:p,children:[e.jsx(re,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(le,{})}),e.jsxs(ce,{className:"bg-white border-gray-200",children:[e.jsx(C,{value:"First Term",className:"text-gray-900",children:"First Term"}),e.jsx(C,{value:"Second Term",className:"text-gray-900",children:"Second Term"}),e.jsx(C,{value:"Third Term",className:"text-gray-900",children:"Third Term"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-gray-700",children:"Academic Year"}),e.jsxs(te,{value:D,onValueChange:y,children:[e.jsx(re,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(le,{})}),e.jsxs(ce,{className:"bg-white border-gray-200",children:[e.jsx(C,{value:"2024/2025",className:"text-gray-900",children:"2024/2025"}),e.jsx(C,{value:"2023/2024",className:"text-gray-900",children:"2023/2024"})]})]})]})]})})}),o?s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(r=>{const V=B.find(t=>t.id===r.studentId),k=T.find(t=>t.id===r.classId);return e.jsxs(v,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:[e.jsx(Y,{className:"p-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg text-gray-900",children:[V==null?void 0:V.firstName," ",V==null?void 0:V.lastName," - ",k==null?void 0:k.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.term," - ",r.academicYear]})]}),e.jsx(G,{className:"bg-[#10B981] text-white border-0",children:"Approved"})]})}),e.jsxs(F,{className:"p-5",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Score"}),e.jsx("p",{className:"text-2xl text-gray-900",children:r.totalScore})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Average"}),e.jsxs("p",{className:"text-2xl text-[#2563EB]",children:[r.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Position"}),e.jsxs("p",{className:"text-2xl text-[#10B981]",children:[r.position,"/",r.totalStudents]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"No. of Subjects"}),e.jsx("p",{className:"text-2xl text-purple-600",children:r.scores.length})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(g,{onClick:()=>c(r.id),className:"bg-[#2563EB] hover:bg-[#1D4ED8] text-white rounded-xl",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Preview Result"]}),e.jsxs(g,{onClick:()=>d(r.id),className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Print Result"]}),e.jsxs(g,{onClick:()=>f(r.id),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})]},r.id)})}):e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(ae,{className:"text-gray-900",children:["No approved results available for the selected term and academic year.",e.jsx("br",{}),"Results will appear here once approved by the school administrator."]})]}):e.jsxs(ee,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-blue-600"}),e.jsx(ae,{className:"text-gray-900",children:"Please select a child to view their results."})]}),e.jsx(he,{open:z,onOpenChange:R,children:e.jsxs(je,{className:"max-w-4xl rounded-xl bg-white border border-gray-200 text-gray-900 max-h-[90vh] overflow-y-auto",children:[e.jsx(ge,{children:e.jsx(Ne,{className:"text-gray-900",children:"Student Result - Official Report Card"})}),n&&e.jsx("div",{className:"space-y-6 py-4",children:(()=>{const r=B.find(l=>l.id===n.studentId),V=T.find(l=>l.id===n.classId),k=I.find(l=>l.studentId===n.studentId&&l.term===n.term&&l.academicYear===n.academicYear),t=$.find(l=>l.studentId===n.studentId&&l.term===n.term&&l.academicYear===n.academicYear);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center border-b border-gray-200 pb-4",children:[e.jsx("h2",{className:"text-2xl text-gray-900 font-bold",children:"Graceland Royal Academy Gombe"}),e.jsx("p",{className:"text-sm text-gray-600 italic",children:"Wisdom & Illumination"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[n.term," - ",n.academicYear," Academic Report"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student Name:"}),e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admission Number:"}),e.jsx("p",{className:"text-lg text-gray-900 font-medium",children:r==null?void 0:r.admissionNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class:"}),e.jsx("p",{className:"text-lg text-gray-900 font-medium",children:V==null?void 0:V.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Position:"}),e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:[n.position," out of ",n.totalStudents]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md text-gray-900 font-medium mb-2",children:"Academic Performance"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsxs(w,{className:"bg-[#2563EB]",children:[e.jsx(j,{className:"text-white",children:"Subject"}),e.jsx(j,{className:"text-white text-center",children:"CA1 (20)"}),e.jsx(j,{className:"text-white text-center",children:"CA2 (20)"}),e.jsx(j,{className:"text-white text-center",children:"Exam (60)"}),e.jsx(j,{className:"text-white text-center",children:"Total (100)"}),e.jsx(j,{className:"text-white text-center",children:"Grade"}),e.jsx(j,{className:"text-white",children:"Remark"})]})}),e.jsxs(me,{children:[n.scores.map(l=>{const b=U.find(W=>W.id===l.subjectAssignmentId);return e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900 font-medium",children:b==null?void 0:b.subjectName}),e.jsx(i,{className:"text-center text-gray-900",children:l.ca1}),e.jsx(i,{className:"text-center text-gray-900",children:l.ca2}),e.jsx(i,{className:"text-center text-gray-900",children:l.exam}),e.jsx(i,{className:"text-center text-gray-900 font-medium",children:l.total}),e.jsx(i,{className:"text-center",children:e.jsx(G,{className:"bg-[#10B981] text-white border-0",children:l.grade})}),e.jsx(i,{className:"text-gray-600 text-sm",children:l.remark})]},l.id)}),e.jsxs(w,{className:"bg-blue-50 font-medium",children:[e.jsx(i,{colSpan:4,className:"text-gray-900",children:e.jsx("strong",{children:"Total/Average"})}),e.jsx(i,{className:"text-center text-gray-900",children:e.jsxs("strong",{children:[n.averageScore.toFixed(1),"%"]})}),e.jsx(i,{colSpan:2})]})]})]})})]}),(k||t)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[k&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md text-gray-900 font-medium mb-2",children:"Affective Domain"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Attentiveness:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:k.attentiveness})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Honesty:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:k.honesty})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Neatness:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:k.neatness})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Obedience:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:k.obedience})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Sense of Responsibility:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:k.senseOfResponsibility})]})]})]}),t&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md text-gray-900 font-medium mb-2",children:"Psychomotor Domain"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Attention to Direction:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.attentionToDirection})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Considerate of Others:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.considerateOfOthers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Handwriting:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.handwriting})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Sports:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.sports})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Verbal Fluency:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.verbalFluency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Works Well Independently:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:t.worksWellIndependently})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md text-gray-900 font-medium mb-2",children:"Class Teacher's Comment"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-700 italic",children:n.classTeacherComment})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 text-sm text-gray-600",children:[e.jsxs("p",{children:["Compiled: ",new Date(n.compiledDate).toLocaleDateString()]}),e.jsxs("p",{children:["Status: ",e.jsx("span",{className:"text-green-600 font-medium",children:"Approved by Admin"})]})]})]})})()}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(g,{onClick:()=>R(!1),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:"Close"}),n&&e.jsxs(g,{onClick:()=>{d(n.id),R(!1)},className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Print Result"]})]})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-yellow-600"}),e.jsx(ae,{className:"text-gray-900",children:"Parent account not found. Please contact the school administrator."})]})})}function We(){const{currentUser:E,students:B,parents:h,payments:T,getFeeStructureByClass:P,getStudentFeeBalance:U,addPayment:I,updateStudentFeeBalance:$,currentTerm:x,currentAcademicYear:m,fetchPaymentsByStudent:N}=be(),[o,L]=u.useState(null),[A,p]=u.useState(""),[D,y]=u.useState(""),[z,R]=u.useState(""),[H,S]=u.useState(!1),[a,M]=u.useState(!1),[J,Q]=u.useState([]),[_,X]=u.useState(!1);u.useEffect(()=>{if(!o)return;N(o);const t=B.find(l=>l.id===o);t&&Se.getAll({class:t.classId}).then(l=>{var W;const b=Array.isArray(l)?l:(W=l==null?void 0:l.data)!=null?W:[];Q(Array.isArray(b)?b:[])}).catch(()=>{Q([])})},[o,B]);const s=E?h.find(t=>t.id===E.linkedId):null,n=s?B.filter(t=>s.studentIds.includes(t.id)):[],d=o?B.find(t=>t.id===o):null,f=d?P(d.classId,x!=null?x:"",m!=null?m:""):null,c=d?U(d.id,x!=null?x:"",m!=null?m:""):null,K=d?T.filter(t=>t.studentId===d.id&&t.term===x&&t.academicYear===m&&t.status==="Verified"):[],r=()=>Ce(this,null,function*(){if(!o||!E){O.error("Please select a student");return}if(!A||parseFloat(A)<=0){O.error("Please enter a valid payment amount");return}if(!D){O.error("Please select a payment method");return}if(J.length===0){O.error("No fees found for this student. Please contact the school.");return}const t=parseFloat(A),l=(c==null?void 0:c.balance)||0;if(t>l){O.error(`Payment amount exceeds balance (₦${l.toLocaleString()})`);return}X(!0);try{const b=J[0].id,W=z||`TRX${Date.now()}`,q=yield Be.create({student_id:o,fee_id:b,amount_paid:t,payment_method:D,transaction_id:W});if(q!=null&&q.success||q!=null&&q.id){const Fe=`REC/${new Date().getFullYear()}/${String(T.length+1).padStart(4,"0")}`;I({studentId:o,studentName:`${d==null?void 0:d.firstName} ${d==null?void 0:d.lastName}`,amount:t,paymentType:t>=l?"Full Payment":"Partial Payment",term:x||"",academicYear:m||"",paymentMethod:D,reference:W,recordedBy:E.id,recordedDate:new Date().toISOString(),status:"Pending",receiptNumber:Fe}),$(o),O.success(`Payment of ₦${t.toLocaleString()} submitted successfully! Receipt: ${Fe}`),p(""),y(""),R(""),S(!1)}else O.error((q==null?void 0:q.message)||"Failed to submit payment. Please try again.")}catch(b){const W=(b==null?void 0:b.data)&&b.data.message||(b==null?void 0:b.message)||"Failed to submit payment";O.error(W),console.error("Payment submission error:",b)}finally{X(!1)}}),V=()=>{c&&(p(c.balance.toString()),S(!0))},k=t=>{O.success(`Downloading receipt ${t.receiptNumber}...`)};return s?n.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"Pay School Fees"}),e.jsx("p",{className:"text-gray-600",children:"Make payments for your children's school fees"})]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-blue-600"}),e.jsx(ae,{className:"text-gray-900",children:"No children linked to your account. Please contact the school administrator to link your children."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"Pay School Fees"}),e.jsx("p",{className:"text-gray-600",children:"View fee structures, balances, and make payments for your children"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>{const l=U(t.id,x!=null?x:"",m!=null?m:""),b=P(t.classId,x!=null?x:"",m!=null?m:"");return e.jsx(v,{className:`rounded-xl bg-white border shadow-sm cursor-pointer transition-all ${o===t.id?"border-[#2563EB] shadow-md":"border-gray-200 hover:border-[#3B82F6]"}`,onClick:()=>L(t.id),children:e.jsxs(F,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.className})]}),o===t.id&&e.jsx(G,{className:"bg-[#2563EB] text-white border-0",children:"Selected"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Fee:"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["₦",(b==null?void 0:b.totalFee.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Paid:"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["₦",(l==null?void 0:l.totalPaid.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Balance:"}),e.jsxs("span",{className:`font-medium ${((l==null?void 0:l.balance)||0)>0?"text-red-600":"text-green-600"}`,children:["₦",(l==null?void 0:l.balance.toLocaleString())||"0"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(G,{className:`${(l==null?void 0:l.status)==="Paid"?"bg-[#10B981] text-white":(l==null?void 0:l.status)==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"} border-0`,children:(l==null?void 0:l.status)||"Unpaid"})})]})},t.id)})}),d&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:[e.jsx(Y,{className:"p-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-[#2563EB]"}),e.jsxs("h3",{className:"text-lg text-gray-900",children:["Fee Structure - ",d.firstName," ",d.lastName," (",d.className,")"]})]}),e.jsx(g,{onClick:()=>M(!0),variant:"outline",size:"sm",className:"rounded-xl border-gray-300 text-gray-700",children:"View Details"})]})}),e.jsxs(F,{className:"p-5",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Fee Required"}),e.jsxs("p",{className:"text-2xl text-gray-900",children:["₦",(f==null?void 0:f.totalFee.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount Paid"}),e.jsxs("p",{className:"text-2xl text-green-600",children:["₦",(c==null?void 0:c.totalPaid.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Balance Due"}),e.jsxs("p",{className:"text-2xl text-red-600",children:["₦",(c==null?void 0:c.balance.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx(G,{className:`${(c==null?void 0:c.status)==="Paid"?"bg-[#10B981] text-white":(c==null?void 0:c.status)==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"} border-0 text-lg`,children:(c==null?void 0:c.status)||"Unpaid"})]})]}),((c==null?void 0:c.balance)||0)>0&&e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs(g,{onClick:()=>S(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl shadow-sm",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Make Partial Payment"]}),e.jsxs(g,{onClick:V,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl shadow-sm",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Pay Full Balance (₦",c==null?void 0:c.balance.toLocaleString(),")"]})]}),(c==null?void 0:c.status)==="Paid"&&e.jsxs(ee,{className:"bg-green-50 border-green-200 rounded-xl mt-4",children:[e.jsx(se,{className:"h-4 w-4 text-green-600"}),e.jsxs(ae,{className:"text-gray-900",children:["✓ All fees paid for ",x," - ",m]})]})]})]}),e.jsxs(v,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:[e.jsx(Y,{className:"p-5 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg text-gray-900",children:"Payment History"})}),e.jsx(F,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsxs(w,{className:"bg-[#2563EB] border-none hover:bg-[#2563EB]",children:[e.jsx(j,{className:"text-white",children:"Date"}),e.jsx(j,{className:"text-white",children:"Receipt No."}),e.jsx(j,{className:"text-white",children:"Amount"}),e.jsx(j,{className:"text-white",children:"Payment Type"}),e.jsx(j,{className:"text-white",children:"Method"}),e.jsx(j,{className:"text-white",children:"Status"}),e.jsx(j,{className:"text-white text-center",children:"Action"})]})}),e.jsx(me,{children:K.length===0?e.jsx(w,{className:"bg-white",children:e.jsx(i,{colSpan:7,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(we,{className:"w-12 h-12 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:"No payment records"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Make your first payment to see history here"})]})})}):K.map(t=>e.jsxs(w,{className:"bg-white border-b border-gray-100 hover:bg-gray-50",children:[e.jsx(i,{className:"text-gray-900",children:new Date(t.recordedDate).toLocaleDateString()}),e.jsx(i,{className:"text-gray-900 font-mono text-sm",children:t.receiptNumber}),e.jsxs(i,{className:"text-gray-900 font-medium",children:["₦",t.amount.toLocaleString()]}),e.jsx(i,{className:"text-gray-600",children:t.paymentType}),e.jsx(i,{className:"text-gray-600",children:t.paymentMethod}),e.jsx(i,{children:e.jsx(G,{className:"bg-[#10B981] text-white border-0",children:t.status})}),e.jsx(i,{className:"text-center",children:e.jsxs(g,{onClick:()=>k(t),size:"sm",variant:"ghost",className:"text-[#2563EB] hover:bg-blue-50",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Receipt"]})})]},t.id))})]})})})]})]}),e.jsx(he,{open:H,onOpenChange:S,children:e.jsxs(je,{className:"max-w-md rounded-xl bg-white border border-gray-200 text-gray-900",children:[e.jsx(ge,{children:e.jsx(Ne,{className:"text-gray-900",children:"Make Payment"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student:"}),e.jsxs("p",{className:"text-lg text-gray-900",children:[d==null?void 0:d.firstName," ",d==null?void 0:d.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:d==null?void 0:d.className})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding Balance:"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["₦",(c==null?void 0:c.balance.toLocaleString())||"0"]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-gray-700",children:["Payment Amount (₦) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{type:"number",placeholder:"Enter amount",value:A,onChange:t=>p(t.target.value),className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum: ₦",(c==null?void 0:c.balance.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-gray-700",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(te,{value:D,onValueChange:y,children:[e.jsx(re,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(le,{placeholder:"Select payment method"})}),e.jsxs(ce,{className:"bg-white border-gray-200",children:[e.jsx(C,{value:"bank_transfer",className:"text-gray-900",children:"Bank Transfer"}),e.jsx(C,{value:"cash",className:"text-gray-900",children:"Cash"}),e.jsx(C,{value:"pos",className:"text-gray-900",children:"Card Payment"}),e.jsx(C,{value:"online",className:"text-gray-900",children:"Mobile Money"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-gray-700",children:"Transaction Reference (Optional)"}),e.jsx(fe,{placeholder:"Enter transaction reference",value:z,onChange:t=>R(t.target.value),className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(g,{onClick:()=>S(!1),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:"Cancel"}),e.jsxs(g,{onClick:r,disabled:_,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),_?"Processing...":"Confirm Payment"]})]})]})}),e.jsx(he,{open:a,onOpenChange:M,children:e.jsxs(je,{className:"max-w-2xl rounded-xl bg-white border border-gray-200 text-gray-900",children:[e.jsx(ge,{children:e.jsxs(Ne,{className:"text-gray-900",children:["Fee Structure - ",d==null?void 0:d.className]})}),f&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[x," - ",m]})}),e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsxs(w,{className:"bg-gray-100",children:[e.jsx(j,{className:"text-gray-900",children:"Fee Item"}),e.jsx(j,{className:"text-gray-900 text-right",children:"Amount (₦)"})]})}),e.jsxs(me,{children:[e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Tuition Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.tuitionFee.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Development Levy"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.developmentLevy.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Sports Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.sportsFee.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Exam Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.examFee.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Books Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.booksFee.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Uniform Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.uniformFee.toLocaleString()})]}),e.jsxs(w,{className:"border-b border-gray-100",children:[e.jsx(i,{className:"text-gray-900",children:"Transport Fee"}),e.jsx(i,{className:"text-gray-900 text-right",children:f.transportFee.toLocaleString()})]}),e.jsxs(w,{className:"bg-blue-50",children:[e.jsx(i,{className:"text-gray-900 font-bold",children:"TOTAL FEE"}),e.jsxs(i,{className:"text-gray-900 font-bold text-right text-lg",children:["₦",f.totalFee.toLocaleString()]})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(g,{onClick:()=>M(!1),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:"Close"})})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200 rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 text-yellow-600"}),e.jsx(ae,{className:"text-gray-900",children:"Parent account not found. Please contact the school administrator."})]})})}function xs(){var Q,_,X;const{logout:E,permissions:B}=Pe(),{currentUser:h,parents:T,students:P,getUnreadNotifications:U,getAllNotifications:I,studentFeeBalances:$,currentTerm:x,currentAcademicYear:m}=be(),[N,o]=u.useState("dashboard"),L=h?T.find(s=>s.id===h.linkedId):null,A=L?`${L.firstName} ${L.lastName}`:"Parent",p=(h==null?void 0:h.assignments)||{},D=(h==null?void 0:h.permissions)||[],y=h?U(h.id,h.role).length:0,R=(h?I(h.id,h.role):[]).slice(0,3),H=L?P.filter(s=>L.studentIds.includes(s.id)):p.students?P.filter(s=>{var n;return(n=p.students)==null?void 0:n.includes(s.id)}):[],S=H.map(s=>{var c,K;const n=$.find(r=>r.studentId===s.id&&r.term===x&&r.academicYear===m),d=(c=n==null?void 0:n.totalFeeRequired)!=null?c:0,f=(K=n==null?void 0:n.balance)!=null?K:0;return{id:s.id,name:`${s.firstName} ${s.lastName}`,class:s.className,balance:f,photo:"",totalFee:d}}),a=[{icon:e.jsx(Ae,{className:"w-5 h-5"}),label:"Dashboard",id:"dashboard"},{icon:e.jsx(ye,{className:"w-5 h-5"}),label:"My Children",id:"my-children"},...B.canViewReports?[{icon:e.jsx(ie,{className:"w-5 h-5"}),label:"View Results",id:"view-results"}]:[],{icon:e.jsx(de,{className:"w-5 h-5"}),label:"Pay Fees",id:"pay-fees"},{icon:e.jsx(De,{className:"w-5 h-5"}),label:"Notifications",id:"notifications"}].filter(Boolean),M=s=>{s==="logout"?E():o(s)},J=({child:s})=>e.jsxs(he,{children:[e.jsx(Ie,{asChild:!0,children:e.jsx(g,{className:"bg-[#3B82F6] text-white hover:bg-[#2563EB] rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all",children:"Pay Now"})}),e.jsxs(je,{className:"max-w-md rounded-lg bg-white border border-[#E5E7EB] text-[#1F2937]",children:[e.jsx(ge,{children:e.jsxs(Ne,{className:"text-[#1F2937]",children:["Pay Fees - ",s.name]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280]",children:"Outstanding Balance"}),e.jsxs("p",{className:"text-[#1F2937] font-semibold",children:["₦",s.balance.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#1F2937]",children:"Amount to Pay (₦)"}),e.jsx(fe,{type:"number",placeholder:"Enter amount",className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#1F2937]",children:"Upload Payment Proof"}),e.jsxs("div",{className:"border-2 border-dashed border-[#E5E7EB] rounded-lg p-8 text-center cursor-pointer hover:border-[#3B82F6] transition-colors bg-[#F9FAFB]",children:[e.jsx($e,{className:"w-8 h-8 mx-auto mb-2 text-[#6B7280]"}),e.jsx("p",{className:"text-[#6B7280]",children:"Click to upload receipt/proof"}),e.jsx("p",{className:"text-xs text-[#6B7280] mt-1",children:"PNG, JPG up to 5MB"})]})]}),e.jsx(g,{className:"w-full h-12 bg-[#10B981] text-white hover:bg-[#059669] rounded-lg shadow-clinical",onClick:()=>O.success("Payment submitted for verification!"),children:"Submit Payment"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9]",children:[e.jsx(Re,{items:a,activeItem:N,onItemClick:M}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(ke,{userName:A,userRole:"Parent",notificationCount:y,onLogout:E,onNotificationClick:()=>o("notifications")}),e.jsxs("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[N==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-[#1F2937] mb-2",children:["Welcome back, ",A]}),e.jsx("p",{className:"text-[#6B7280]",children:"Monitor your children's academic progress and manage school activities"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-[#10B981]",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsxs("span",{children:["Optimized data loading - ",H.length," children loaded"]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(Y,{className:"border-b border-[#E5E7EB] p-5",children:e.jsxs("h3",{className:"text-[#1F2937] font-semibold flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-[#10B981]"}),"My Access & Permissions"]})}),e.jsxs(F,{className:"p-5 space-y-3",children:[D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"w-12 h-12 text-[#9CA3AF] mx-auto mb-3"}),e.jsx("p",{className:"text-[#6B7280]",children:"No specific permissions assigned"}),e.jsx("p",{className:"text-[#9CA3AF] text-sm mt-1",children:"Contact administrator to get permissions"})]}):D.map((s,n)=>{const d=c=>c.includes("Academic")?e.jsx(ve,{className:"w-5 h-5 text-[#10B981]"}):c.includes("Fee")?e.jsx(de,{className:"w-5 h-5 text-[#3B82F6]"}):c.includes("Communication")?e.jsx(Ge,{className:"w-5 h-5 text-[#F59E0B]"}):c.includes("Calendar")?e.jsx(Oe,{className:"w-5 h-5 text-[#6B7280]"}):e.jsx(ne,{className:"w-5 h-5 text-[#007C91]"}),f=c=>c.includes("Academic")?"bg-[#D1FAE5] border-[#10B981]/20":c.includes("Fee")?"bg-[#DBEAFE] border-[#3B82F6]/20":c.includes("Communication")?"bg-[#FEF3C7] border-[#F59E0B]/20":c.includes("Calendar")?"bg-[#F3F4F6] border-[#6B7280]/20":"bg-[#E0F2FE] border-[#007C91]/20";return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${f(s)}`,children:[d(s),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium text-sm",children:s}),e.jsxs("p",{className:"text-[#6B7280] text-xs",children:[s.includes("Academic")&&"View results, attendance, and progress reports",s.includes("Fee")&&"View fee status, make payments, download receipts",s.includes("Communication")&&"Receive notifications, communicate with teachers",s.includes("Calendar")&&"View school calendar, events, and schedules"]})]})]},n)}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#E0F2FE] rounded-lg border border-[#007C91]/20",children:[e.jsx(ne,{className:"w-5 h-5 text-[#007C91]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium text-sm",children:"Basic Access"}),e.jsx("p",{className:"text-[#6B7280] text-xs",children:"View your children's information and school updates"})]})]})]})]}),e.jsxs(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(Y,{className:"border-b border-[#E5E7EB] p-5",children:e.jsxs("h3",{className:"text-[#1F2937] font-semibold flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-[#3B82F6]"}),"Linked Students (",S.length,")"]})}),e.jsx(F,{className:"p-5 space-y-3",children:S.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-12 h-12 text-[#9CA3AF] mx-auto mb-3"}),e.jsx("p",{className:"text-[#6B7280]",children:"No students linked yet"}),e.jsx("p",{className:"text-[#9CA3AF] text-sm mt-1",children:"Contact administrator to link your children"})]}):S.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#3B82F6] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#3B82F6] flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium text-sm",children:s.name}),e.jsx("p",{className:"text-[#6B7280] text-xs",children:s.class})]})]}),e.jsx(G,{className:"bg-[#10B981] text-white border-0 text-xs",children:"Active"})]},s.id))})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:S.map(s=>e.jsxs(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift",children:[e.jsx(Y,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] flex items-center justify-center",children:e.jsx(pe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#1F2937]",children:s.name}),e.jsx("p",{className:"text-[#6B7280]",children:s.class})]})]})}),e.jsxs(F,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Total Fee"}),e.jsxs("p",{className:"text-[#1F2937] font-medium",children:["₦",s.totalFee.toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Balance"}),e.jsxs("p",{className:s.balance>0?"text-[#EF4444] font-medium":"text-[#10B981] font-medium",children:["₦",s.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:()=>o("performance-reports"),variant:"outline",className:"flex-1 rounded-lg border-[#E5E7EB] text-[#6B7280] hover:bg-[#F9FAFB] hover:text-[#1F2937]",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"View Result"]}),s.balance>0&&e.jsx(J,{child:s})]}),s.balance===0&&e.jsx("div",{className:"p-3 bg-[#DCFCE7] border border-[#10B981] rounded-lg text-center",children:e.jsx(G,{className:"bg-[#10B981] text-white border-0",children:"Fully Paid"})})]})]},s.id))}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(Y,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Recent Notifications"})}),e.jsx(F,{className:"space-y-3 p-5 pt-5",children:R.length===0?e.jsx("div",{className:"text-center py-6 text-[#6B7280] text-sm",children:"No notifications yet."}):R.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#3B82F6] hover:shadow-clinical transition-all",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${s.type==="warning"?"bg-[#F59E0B]":s.type==="error"?"bg-[#EF4444]":s.type==="success"?"bg-[#10B981]":"bg-[#3B82F6]"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#1F2937] font-medium",children:s.title}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:new Date(s.sentDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]},s.id))})]}),e.jsxs(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(Y,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Quick Actions"})}),e.jsxs(F,{className:"space-y-3 p-5 pt-5",children:[e.jsxs(g,{onClick:()=>o("performance-reports"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(ie,{className:"w-5 h-5 mr-3"}),"View Academic Reports"]}),e.jsxs(g,{onClick:()=>o("pay-fees"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(de,{className:"w-5 h-5 mr-3"}),"Make Payment"]}),e.jsxs(g,{onClick:()=>o("payment-history"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(we,{className:"w-5 h-5 mr-3"}),"View Payment History"]}),e.jsxs(g,{onClick:()=>o("performance-reports"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(ue,{className:"w-5 h-5 mr-3"}),"Download Report Card"]})]})]})]})]}),N==="my-children"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"My Children"}),e.jsx("p",{className:"text-[#6B7280]",children:"View details and academic information for your children"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:S.map(s=>e.jsx(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(F,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#3B82F6] flex items-center justify-center",children:e.jsx(pe,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-[#1F2937] mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-[#6B7280]",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:s.class})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("span",{className:"text-[#6B7280]",children:"Total Fee:"}),e.jsxs("span",{className:"text-[#1F2937] font-medium",children:["₦",s.totalFee.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("span",{className:"text-[#6B7280]",children:"Amount Paid:"}),e.jsxs("span",{className:"text-[#10B981] font-medium",children:["₦",(s.totalFee-s.balance).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("span",{className:"text-[#6B7280]",children:"Balance:"}),e.jsxs("span",{className:s.balance>0?"text-[#EF4444] font-medium":"text-[#10B981] font-medium",children:["₦",s.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx(g,{onClick:()=>o("performance-reports"),className:"flex-1 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all",children:"View Results"}),s.balance>0&&e.jsx(J,{child:s})]})]})},s.id))})]}),N==="view-results"&&e.jsx(_e,{}),N==="performance-reports"&&e.jsx(He,{}),N==="pay-fees"&&e.jsx(We,{}),N==="change-password"&&e.jsx(Ye,{}),N==="notifications"&&e.jsx(Te,{}),!["dashboard","my-children","view-results","performance-reports","pay-fees","change-password","notifications"].includes(N)&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(v,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-md w-full",children:e.jsxs(F,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] flex items-center justify-center mx-auto mb-4 text-white",children:(Q=a.find(s=>s.id===N))==null?void 0:Q.icon}),e.jsx("h3",{className:"text-[#1F2937] mb-3",children:(_=a.find(s=>s.id===N))==null?void 0:_.label}),e.jsxs("p",{className:"text-[#6B7280]",children:["This section contains the functionality for ",(X=a.find(s=>s.id===N))==null?void 0:X.label.toLowerCase(),"."]})]})})})})]})]})]})}export{xs as ParentDashboard};
